webpackHotUpdate("static/development/pages/business.js",{

/***/ "./pages/business/index.js":
/*!*********************************!*\
  !*** ./pages/business/index.js ***!
  \*********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var antd_lib_card_style__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! antd/lib/card/style */ "./node_modules/antd/lib/card/style/index.js");
/* harmony import */ var antd_lib_card_style__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(antd_lib_card_style__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var antd_lib_card__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! antd/lib/card */ "./node_modules/antd/lib/card/index.js");
/* harmony import */ var antd_lib_card__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(antd_lib_card__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var antd_lib_row_style__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! antd/lib/row/style */ "./node_modules/antd/lib/row/style/index.js");
/* harmony import */ var antd_lib_row_style__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(antd_lib_row_style__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var antd_lib_row__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! antd/lib/row */ "./node_modules/antd/lib/row/index.js");
/* harmony import */ var antd_lib_row__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(antd_lib_row__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var antd_lib_col_style__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! antd/lib/col/style */ "./node_modules/antd/lib/col/style/index.js");
/* harmony import */ var antd_lib_col_style__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(antd_lib_col_style__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var antd_lib_col__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! antd/lib/col */ "./node_modules/antd/lib/col/index.js");
/* harmony import */ var antd_lib_col__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(antd_lib_col__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var antd_lib_message_style__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! antd/lib/message/style */ "./node_modules/antd/lib/message/style/index.js");
/* harmony import */ var antd_lib_message_style__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(antd_lib_message_style__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var antd_lib_message__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! antd/lib/message */ "./node_modules/antd/lib/message/index.js");
/* harmony import */ var antd_lib_message__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(antd_lib_message__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var antd_lib_notification_style__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! antd/lib/notification/style */ "./node_modules/antd/lib/notification/style/index.js");
/* harmony import */ var antd_lib_notification_style__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(antd_lib_notification_style__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var antd_lib_notification__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! antd/lib/notification */ "./node_modules/antd/lib/notification/index.js");
/* harmony import */ var antd_lib_notification__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(antd_lib_notification__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var _babel_runtime_corejs2_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @babel/runtime-corejs2/helpers/esm/objectSpread */ "./node_modules/@babel/runtime-corejs2/helpers/esm/objectSpread.js");
/* harmony import */ var _babel_runtime_corejs2_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @babel/runtime-corejs2/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime-corejs2/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_corejs2_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @babel/runtime-corejs2/helpers/esm/createClass */ "./node_modules/@babel/runtime-corejs2/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_corejs2_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @babel/runtime-corejs2/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_corejs2_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @babel/runtime-corejs2/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime-corejs2/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _babel_runtime_corejs2_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @babel/runtime-corejs2/helpers/esm/assertThisInitialized */ "./node_modules/@babel/runtime-corejs2/helpers/esm/assertThisInitialized.js");
/* harmony import */ var _babel_runtime_corejs2_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @babel/runtime-corejs2/helpers/esm/inherits */ "./node_modules/@babel/runtime-corejs2/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_corejs2_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @babel/runtime-corejs2/helpers/esm/defineProperty */ "./node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_18___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_18__);
/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! next/router */ "./node_modules/next/router.js");
/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_19___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_19__);
/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! react-redux */ "./node_modules/react-redux/es/index.js");
/* harmony import */ var _src_reduxHelper__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../../src/reduxHelper */ "./src/reduxHelper/index.js");
/* harmony import */ var _src_reduxHelper__WEBPACK_IMPORTED_MODULE_21___default = /*#__PURE__*/__webpack_require__.n(_src_reduxHelper__WEBPACK_IMPORTED_MODULE_21__);
/* harmony import */ var _validate__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./validate */ "./pages/business/validate.js");
/* harmony import */ var _wrapper__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../wrapper */ "./pages/wrapper.js");
/* harmony import */ var _src_components_atoms_loading__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ../../src/components/atoms/loading */ "./src/components/atoms/loading/index.js");
/* harmony import */ var _src_components_templates_csrTemplate__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ../../src/components/templates/csrTemplate */ "./src/components/templates/csrTemplate/index.js");
/* harmony import */ var _src_components_organisms_forms_myGotoPayment__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ../../src/components/organisms/forms/myGotoPayment */ "./src/components/organisms/forms/myGotoPayment.js");




























var App =
/*#__PURE__*/
function (_Component) {
  Object(_babel_runtime_corejs2_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_16__["default"])(App, _Component);

  function App(props) {
    var _this;

    Object(_babel_runtime_corejs2_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_11__["default"])(this, App);

    _this = Object(_babel_runtime_corejs2_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_13__["default"])(this, Object(_babel_runtime_corejs2_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_14__["default"])(App).call(this, props));

    Object(_babel_runtime_corejs2_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_17__["default"])(Object(_babel_runtime_corejs2_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_15__["default"])(_this), "handlePayment", function () {
      var formData = _this.state.formData;
      var amount = _this.state.totalAmount;
      var businessId = _this.props.router.query.bid;
      var cart = _this.state.cart;
      var paymentFunc = _this.props.createPaymentMyGoto;

      var data = Object(_babel_runtime_corejs2_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_10__["default"])({}, formData, {
        amount: amount,
        fk_business_id: businessId,
        //pk_payment_id: response.razorpay_payment_id,
        cart: cart
      });

      Object(_validate__WEBPACK_IMPORTED_MODULE_22__["validatePayment"])(data).then(function (validate) {
        if (validate === "validate") {
          var options = {
            key: "rzp_live_MlgUcfBEMLoLme",
            //key: "rzp_test_IWXggiN4CqBvCo",
            amount: amount * 100,
            currency: "INR",
            name: "MyGoto",
            description: "Pay for your gift card.",
            payment_capture: "1",
            image: "https://file-upload-123.s3.ap-south-1.amazonaws.com/brandImages/1585596282121-mygoto.jpeg",
            prefill: {
              name: formData.name,
              email: formData.email
            },
            notes: {
              address: "Hello World"
            },
            theme: {
              color: "#1E4ED6"
            },
            handler: function handler(response) {
              data["pk_payment_id"] = response.razorpay_payment_id;
              paymentFunc(data).then(function (res) {
                antd_lib_notification__WEBPACK_IMPORTED_MODULE_9___default.a["success"]({
                  message: "Success",
                  description: "The gift cards has been sent to your email and mobile number, please check in spam if not received"
                });
              }).catch(function (err) {
                antd_lib_notification__WEBPACK_IMPORTED_MODULE_9___default.a["error"]({
                  message: "Error",
                  description: "Some problem occured. Please try again."
                });
              });
            }
          };
          var rzp = new window.Razorpay(options);
          rzp.open();
        }
      }).catch(function (err) {
        antd_lib_message__WEBPACK_IMPORTED_MODULE_7___default.a.error("" + err); //this.setState({ apiRequestLoading: false })

      });
    });

    Object(_babel_runtime_corejs2_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_17__["default"])(Object(_babel_runtime_corejs2_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_15__["default"])(_this), "handleValue", function (e) {
      var obj = {};
      obj[e.target.name] = e.target.value;

      _this.setState({
        formData: Object(_babel_runtime_corejs2_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_10__["default"])({}, _this.state.formData, obj)
      });
    });

    Object(_babel_runtime_corejs2_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_17__["default"])(Object(_babel_runtime_corejs2_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_15__["default"])(_this), "handleGiftCard", function (amount) {
      console.log(amount.target.value);
      var cart = _this.state.cart;
      cart.push({
        amount: amount.target.value,
        quantity: 1
      });

      _this.setState({
        cart: cart
      });

      _this.setState({
        totalAmount: amount.target.value
      });
    });

    Object(_babel_runtime_corejs2_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_17__["default"])(Object(_babel_runtime_corejs2_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_15__["default"])(_this), "handleAmount", function (e) {
      var totalAmount = 0;
      var cart = _this.state.cart; // Check if amount already exist

      cart.map(function (item, index) {
        if (item.amount === e.target.name) cart.splice(index, 1);
      }); // Check if value is null

      if (e.target.value != "") {
        cart.push({
          amount: e.target.name,
          quantity: e.target.value
        });

        _this.setState({
          cart: cart
        });
      }

      _this.state.cart.map(function (item) {
        totalAmount = totalAmount + item.amount * item.quantity;
      });

      _this.setState({
        totalAmount: totalAmount
      });
    });

    _this.state = {
      formData: {},
      cart: [],
      totalAmount: 0
    };
    return _this;
  }

  Object(_babel_runtime_corejs2_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_12__["default"])(App, [{
    key: "componentDidMount",
    value: function componentDidMount() {
      this.props.getMyGotoBusinessById(this.props.router.query.bid);
      var aScript = document.createElement("script");
      aScript.type = "text/javascript";
      aScript.src = "https://checkout.razorpay.com/v1/checkout.js";
      document.head.appendChild(aScript);
    }
  }, {
    key: "render",
    value: function render() {
      if (this.props.myGotoBusinessById.isLoaded) return react__WEBPACK_IMPORTED_MODULE_18___default.a.createElement(_src_components_templates_csrTemplate__WEBPACK_IMPORTED_MODULE_25__["default"], {
        diplaySearch: false,
        diplayBusinessDetails: true // background={`url(${this.props.myGotoBusinessById.response.data.data.image})`}
        ,
        background: "url(".concat(this.props.myGotoBusinessById.response.data.data.image, ")"),
        displayFilter: false,
        businessName: this.props.myGotoBusinessById.response.data.data.name
      }, react__WEBPACK_IMPORTED_MODULE_18___default.a.createElement(antd_lib_row__WEBPACK_IMPORTED_MODULE_3___default.a, null, react__WEBPACK_IMPORTED_MODULE_18___default.a.createElement(antd_lib_col__WEBPACK_IMPORTED_MODULE_5___default.a, {
        sm: 16
      }, react__WEBPACK_IMPORTED_MODULE_18___default.a.createElement(antd_lib_row__WEBPACK_IMPORTED_MODULE_3___default.a, {
        gutter: [16, 16]
      }, react__WEBPACK_IMPORTED_MODULE_18___default.a.createElement(antd_lib_col__WEBPACK_IMPORTED_MODULE_5___default.a, {
        xs: 8
      }, react__WEBPACK_IMPORTED_MODULE_18___default.a.createElement("h3", null, "Locality"), react__WEBPACK_IMPORTED_MODULE_18___default.a.createElement("p", null, this.props.myGotoBusinessById.response.data.data.locality)), react__WEBPACK_IMPORTED_MODULE_18___default.a.createElement(antd_lib_col__WEBPACK_IMPORTED_MODULE_5___default.a, {
        xs: 8
      }, react__WEBPACK_IMPORTED_MODULE_18___default.a.createElement("h3", null, "City"), react__WEBPACK_IMPORTED_MODULE_18___default.a.createElement("p", null, this.props.myGotoBusinessById.response.data.data.city)), react__WEBPACK_IMPORTED_MODULE_18___default.a.createElement(antd_lib_col__WEBPACK_IMPORTED_MODULE_5___default.a, {
        xs: 8
      }, react__WEBPACK_IMPORTED_MODULE_18___default.a.createElement("h3", null, "State"), react__WEBPACK_IMPORTED_MODULE_18___default.a.createElement("p", null, this.props.myGotoBusinessById.response.data.data.state))), react__WEBPACK_IMPORTED_MODULE_18___default.a.createElement("br", null), react__WEBPACK_IMPORTED_MODULE_18___default.a.createElement("h3", null, "About"), react__WEBPACK_IMPORTED_MODULE_18___default.a.createElement("p", null, this.props.myGotoBusinessById.response.data.data.description), react__WEBPACK_IMPORTED_MODULE_18___default.a.createElement("br", null), react__WEBPACK_IMPORTED_MODULE_18___default.a.createElement("h3", null, "Address"), react__WEBPACK_IMPORTED_MODULE_18___default.a.createElement("p", null, this.props.myGotoBusinessById.response.data.data.address)), react__WEBPACK_IMPORTED_MODULE_18___default.a.createElement(antd_lib_col__WEBPACK_IMPORTED_MODULE_5___default.a, {
        sm: 8
      }, react__WEBPACK_IMPORTED_MODULE_18___default.a.createElement(antd_lib_card__WEBPACK_IMPORTED_MODULE_1___default.a, {
        hoverable: true,
        style: {
          width: "100%"
        }
      }, react__WEBPACK_IMPORTED_MODULE_18___default.a.createElement(_src_components_organisms_forms_myGotoPayment__WEBPACK_IMPORTED_MODULE_26__["default"], {
        amount: this.state.totalAmount,
        handleAmount: this.handleGiftCard,
        handlePayment: this.handlePayment,
        handleValue: this.handleValue
      })))), react__WEBPACK_IMPORTED_MODULE_18___default.a.createElement("br", null), react__WEBPACK_IMPORTED_MODULE_18___default.a.createElement("br", null));else return react__WEBPACK_IMPORTED_MODULE_18___default.a.createElement(_src_components_atoms_loading__WEBPACK_IMPORTED_MODULE_24__["default"], null);
    }
  }]);

  return App;
}(react__WEBPACK_IMPORTED_MODULE_18__["Component"]);

var mapStateToProps = function mapStateToProps(state) {
  return {
    myGotoBusinessById: state.getMyGotoBusinessById
  };
};

var mapDispatchToProps = function mapDispatchToProps(dispatch) {
  return {
    getMyGotoBusinessById: function getMyGotoBusinessById(bId) {
      return dispatch(_src_reduxHelper__WEBPACK_IMPORTED_MODULE_21__["getMyGotoBusinessById"].action(bId));
    },
    createPaymentMyGoto: function createPaymentMyGoto(data) {
      return dispatch(_src_reduxHelper__WEBPACK_IMPORTED_MODULE_21__["createPaymentMyGoto"].action(data));
    }
  };
};

/* harmony default export */ __webpack_exports__["default"] = (Object(_wrapper__WEBPACK_IMPORTED_MODULE_23__["default"])(Object(react_redux__WEBPACK_IMPORTED_MODULE_20__["connect"])(mapStateToProps, mapDispatchToProps)(Object(next_router__WEBPACK_IMPORTED_MODULE_19__["withRouter"])(App))));

/***/ })

})
//# sourceMappingURL=business.js.13e97615c32749db96f5.hot-update.js.map