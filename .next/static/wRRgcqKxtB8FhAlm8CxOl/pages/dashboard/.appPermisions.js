(window.webpackJsonp=window.webpackJsonp||[]).push([["4c71"],{Ctgt:function(e,t,n){"use strict";n.r(t);var a=n("q1tI"),o=n.n(a),r=n("17x9"),l=n.n(r),i=n("VCL8");function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function u(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function s(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=n("TSYQ"),y=function(e){function t(e){var n,a,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,o=p(t).call(this,e),n=!o||"object"!=typeof o&&"function"!=typeof o?d(a):o,h(d(d(n)),"handleClick",function(e){var t=n.state.checked,a=n.props.onClick,o=!t;n.setChecked(o,e),a&&a(o,e)}),h(d(d(n)),"handleKeyDown",function(e){37===e.keyCode?n.setChecked(!1,e):39===e.keyCode&&n.setChecked(!0,e)}),h(d(d(n)),"handleMouseUp",function(e){var t=n.props.onMouseUp;n.node&&n.node.blur(),t&&t(e)}),h(d(d(n)),"saveNode",function(e){n.node=e});var r=!1;return r="checked"in e?!!e.checked:!!e.defaultChecked,n.state={checked:r},n}var n,r,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,a["Component"]),n=t,l=[{key:"getDerivedStateFromProps",value:function(e){var t={},n=e.checked;return"checked"in e&&(t.checked=!!n),t}}],(r=[{key:"componentDidMount",value:function(){var e=this.props,t=e.autoFocus,n=e.disabled;t&&!n&&this.focus()}},{key:"setChecked",value:function(e,t){var n=this.props,a=n.disabled,o=n.onChange;a||("checked"in this.props||this.setState({checked:e}),o&&o(e,t))}},{key:"focus",value:function(){this.node.focus()}},{key:"blur",value:function(){this.node.blur()}},{key:"render",value:function(){var e,t=this.props,n=t.className,a=t.prefixCls,r=t.disabled,l=t.loadingIcon,i=t.checkedChildren,s=t.unCheckedChildren,p=u(t,["className","prefixCls","disabled","loadingIcon","checkedChildren","unCheckedChildren"]),f=this.state.checked,d=m((h(e={},n,!!n),h(e,a,!0),h(e,"".concat(a,"-checked"),f),h(e,"".concat(a,"-disabled"),r),e));return o.a.createElement("button",c({},p,{type:"button",role:"switch","aria-checked":f,disabled:r,className:d,ref:this.saveNode,onKeyDown:this.handleKeyDown,onClick:this.handleClick,onMouseUp:this.handleMouseUp}),l,o.a.createElement("span",{className:"".concat(a,"-inner")},f?i:s))}}])&&s(n.prototype,r),l&&s(n,l),t}();y.propTypes={className:l.a.string,prefixCls:l.a.string,disabled:l.a.bool,checkedChildren:l.a.any,unCheckedChildren:l.a.any,onChange:l.a.func,onMouseUp:l.a.func,onClick:l.a.func,tabIndex:l.a.number,checked:l.a.bool,defaultChecked:l.a.bool,autoFocus:l.a.bool,loadingIcon:l.a.node},y.defaultProps={prefixCls:"rc-switch",checkedChildren:null,unCheckedChildren:null,className:"",defaultChecked:!1},Object(i.polyfill)(y),t.default=y},LGkk:function(e,t,n){"use strict";n("VEUW"),n("35vW")},RwXc:function(e,t,n){"use strict";n("nT0F");var a=n("MM9K"),o=n.n(a),r=n("vYYK"),l=n("q1tI"),i=n.n(l);t.a=function(){var e={loaderContainer:{height:"100%",width:"100%"},loader:Object(r.a)({position:"absolute",left:"50%",top:"50%",transform:"translateX(-50%)"},"transform","translateY(-50%)")};return i.a.createElement("div",{style:e.loaderContainer},i.a.createElement(o.a,{style:e.loader,size:"large",tip:"Loading..."}))}},XIdC:function(e,t,n){e.exports=n("Ctgt")},iDuD:function(e,t,n){"use strict";var a=n("q1tI"),o=n.n(a),r=(n("hr7U"),n("9xET")),l=n.n(r),i=(n("LGkk"),n("rVaU")),c=n.n(i),u=(n("fv9D"),n("ZPTe")),s=n.n(u),p={container:{paddingBottom:"6px"},switchContainer:{textAlign:"right"}},f=function(e){return o.a.createElement("div",{style:p.container},o.a.createElement(l.a,{gutter:4,type:"flex"},o.a.createElement(s.a,{span:14},o.a.createElement("h3",null,e.role.charAt(0).toUpperCase()+e.role.slice(1))),o.a.createElement(s.a,{span:10},o.a.createElement("div",{style:p.switchContainer},o.a.createElement(c.a,{defaultChecked:e.defaultChecked,onChange:e.onChange})))))},d=n("0iUn"),h=n("sLSF"),m=n("MI3g"),y=n("a7VT"),b=n("Tit0"),v=n("f+nQ"),g=(n("ek7I"),n("FAat")),O=n.n(g),C=O.a.Option,k=function(e){return o.a.createElement("div",null,o.a.createElement("label",null,e.label),o.a.createElement(O.a,{showArrow:!0,allowClear:!0,style:e.style,placeholder:e.placeholder,optionFilterProp:"children",onChange:e.handleChange,onFocus:e.handleFocus,onBlur:e.handleBlur,filterOption:e.filterOptions,value:e.value},e.optionArray?e.optionArray.map(function(e,t){return o.a.createElement(C,{value:e.value},e.name)}):o.a.createElement(C,{value:"noData",disabled:!0},"No Data Found")))};k.defaultProps={optionArrray:[],placeholder:"Select One",style:{width:"100%"}};var j=k,E=function(e){function t(){return Object(d.default)(this,t),Object(m.default)(this,Object(y.default)(t).apply(this,arguments))}return Object(b.default)(t,e),Object(h.default)(t,[{key:"render",value:function(){var e=this;return o.a.createElement(l.a,{type:"flex",gutter:4},o.a.createElement(s.a,{span:10},o.a.createElement(j,{label:"Location",optionArray:this.props.formData.location,handleFocus:function(t){return e.props.formData.handleFocus("location")},handleChange:function(t){return e.props.formData.handleValue(t,"location")},value:this.props.formData.value.location})),o.a.createElement(s.a,{span:10},o.a.createElement(j,{label:"Employee",optionArray:this.props.formData.employee,handleFocus:function(t){return e.props.formData.handleFocus("employee")},handleChange:function(t){return e.props.formData.handleValue(t,"employee")},value:this.props.formData.value.employee})),o.a.createElement(s.a,{span:4},o.a.createElement(v.a,{value:"Submit",style:{position:"absolute",bottom:"0",width:"100%"},onClick:this.props.formData.onClick})))}}]),t}(a.Component),w=function(e){function t(){return Object(d.default)(this,t),Object(m.default)(this,Object(y.default)(t).apply(this,arguments))}return Object(b.default)(t,e),Object(h.default)(t,[{key:"render",value:function(){var e=this;return o.a.createElement(l.a,{type:"flex",gutter:4},o.a.createElement(s.a,{span:10},o.a.createElement(j,{label:"Employee",optionArray:this.props.formData.employee,value:this.props.formData.value.employee,handleChange:function(t){return e.props.formData.handleValue(t,"employee")}})),o.a.createElement(s.a,{span:4},o.a.createElement(v.a,{value:"Submit",style:{position:"absolute",bottom:"0",width:"100%"},onClick:this.props.formData.onClick})))}}]),t}(a.Component),D={container:{padding:"20px 180px"}};t.a=function(e){return o.a.createElement("div",null,"app"===e.type?o.a.createElement(E,{formData:e.formData}):o.a.createElement(w,{formData:e.formData}),o.a.createElement("div",{style:D.container},console.log("rule",e.rule),e.rules?o.a.createElement("div",null,console.log(e.rule),e.rules.map(function(t){return o.a.createElement(f,{role:t.role,defaultChecked:t.permission,onChange:"app"===e.type?function(n){return e.onChange(n,t.roleID,t.user,t.location)}:function(n){return e.onChange(n,t.roleID,t.user,t.business)}})})):null))}},rNFa:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/.appPermisions",function(){var e=n("yyMy");return{page:e.default||e}}])},rVaU:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=f(n("q1tI")),o=f(n("17x9")),r=p(n("XIdC")),l=p(n("TSYQ")),i=p(n("BGR+")),c=p(n("ev5A")),u=p(n("Pbn2")),s=n("vgIT");function p(e){return e&&e.__esModule?e:{default:e}}function f(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};a.get||a.set?Object.defineProperty(t,n,a):t[n]=e[n]}return t.default=e,t}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function b(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var O=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=b(this,v(t).apply(this,arguments))).saveSwitch=function(t){e.rcSwitch=t},e.renderSwitch=function(t){var n,o=t.getPrefixCls,s=e.props,p=s.prefixCls,f=s.size,d=s.loading,y=s.className,b=void 0===y?"":y,v=s.disabled,g=o("switch",p),O=(0,l.default)(b,(m(n={},"".concat(g,"-small"),"small"===f),m(n,"".concat(g,"-loading"),d),n)),C=d?a.createElement(u.default,{type:"loading",className:"".concat(g,"-loading-icon")}):null;return a.createElement(c.default,{insertExtraNode:!0},a.createElement(r.default,h({},(0,i.default)(e.props,["loading"]),{prefixCls:g,className:O,disabled:v||d,ref:e.saveSwitch,loadingIcon:C})))},e}var n,o,p;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(t,a.Component),n=t,(o=[{key:"focus",value:function(){this.rcSwitch.focus()}},{key:"blur",value:function(){this.rcSwitch.blur()}},{key:"render",value:function(){return a.createElement(s.ConfigConsumer,null,this.renderSwitch)}}])&&y(n.prototype,o),p&&y(n,p),t}();t.default=O,O.__ANT_SWITCH=!0,O.propTypes={prefixCls:o.string,size:o.oneOf(["small","default","large"]),className:o.string}},yyMy:function(e,t,n){"use strict";n.r(t);var a=n("zrwo"),o=(n("tL+A"),n("QpBz")),r=n.n(o),l=n("pLtp"),i=n.n(l),c=n("0iUn"),u=n("sLSF"),s=n("MI3g"),p=n("a7VT"),f=n("AT/M"),d=n("Tit0"),h=n("vYYK"),m=n("q1tI"),y=n.n(m),b=n("/MKj"),v=n("iDuD"),g=n("ErRJ"),O=n("RwXc"),C=function(e){function t(e){var n;return Object(c.default)(this,t),n=Object(s.default)(this,Object(p.default)(t).call(this,e)),Object(h.a)(Object(f.default)(n),"createRuleData",function(e){return console.log("create rule ",e),e?0===i()(e.data).length?null:e.data.map(function(e){return{roleID:e.role,user:e.user,location:e.location,permission:e.permission,role:e.roleunfold.name}}):null}),Object(h.a)(Object(f.default)(n),"createLocationData",function(e){return 0===i()(e).length?null:e.map(function(e){return{value:e.blocationID,name:e.name}})}),Object(h.a)(Object(f.default)(n),"createEmployeeData",function(e){return 0===i()(e).length?null:e.map(function(e){var t=e.userunfold;return{value:e.user,name:"".concat(t.firstName," ").concat(t.LastName)}})}),Object(h.a)(Object(f.default)(n),"handleChange",function(e,t,a,o){n.props.updatePermission({permission:e},t,a,o).then(function(e){r.a.success("Permission changed successfully.")}).catch(function(e){r.a.error("There was an error"),console.log(e)})}),Object(h.a)(Object(f.default)(n),"handleValue",function(e,t){n.setState({formValues:Object(a.a)({},n.state.formValues,Object(h.a)({},t,e))})}),Object(h.a)(Object(f.default)(n),"onClick",function(){n.props.getPermissions(n.state.formValues.employee)}),Object(h.a)(Object(f.default)(n),"handleFocus",function(e){switch(e){case"employee":n.props.getEmployeeByLid(n.state.formValues.location);break;case"location":n.setState({formValues:Object(a.a)({},n.state.formValues,{employee:""})});break;default:console.log("Some Error Occured")}}),n.state={formValues:{location:"",employee:""}},n}return Object(d.default)(t,e),Object(u.default)(t,[{key:"componentDidMount",value:function(){var e=this.props.business.response.data[0].businessID;this.props.getLocationByBid(e)}},{key:"render",value:function(){return this.props.locationData.isLoaded?y.a.createElement(v.a,{type:"app",rules:this.createRuleData(this.props.permissions.response),onChange:this.handleChange,formData:{handleValue:this.handleValue,value:{location:this.state.formValues.location,employee:this.state.formValues.employee},handleFocus:this.handleFocus,location:this.createLocationData(this.props.locationData.response.data),employee:this.props.employeeData.isLoaded?this.createEmployeeData(this.props.employeeData.response.data):null,onClick:this.onClick}}):y.a.createElement(O.a,null)}}]),t}(m.Component);t.default=Object(b.b)(function(e){return{business:e.businesses,permissions:e.getPermissions,employeeData:e.getEmployeeByLid,locationData:e.getLocationByBid}},function(e){return{getPermissions:function(t){return e(g.getPermissions.action(t))},updatePermission:function(t,n,a,o){return e(g.updatePermission.action(t,n,a,o))},getEmployeeByLid:function(t){return e(g.getEmployeeByLid.action(t))},getLocationByBid:function(t){return e(g.getLocationByBid.action(t))},businessPermissions:function(t){return e(g.businessPermissions.action(t))},getEmployeeByBusinessId:function(t){return e(g.getEmployeeByBusinessId.action(t))}}})(C)}},[["rNFa","5d41","9da1","ad9d"]]]);