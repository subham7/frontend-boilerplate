!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("informed",[],t):"object"==typeof exports?exports.informed=t():e.informed=t()}(this,function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s="./src/index.js")}({"./src/index.js":function(e,t,r){"use strict";r.r(t);var n=r("react"),o=r.n(n),i=o.a.createContext({register:function(){},deregister:function(){},setValue:function(){},setTouched:function(){},setError:function(){},update:function(){}}),u=o.a.createContext({}),a=o.a.createContext({getFullField:function(){}}),l=o.a.createContext(),c=(o.a.createContext(),r("lodash/setWith")),f=r.n(c),s=r("lodash/unset"),p=r.n(s),d=r("lodash/toPath"),h=r.n(d),y=r("lodash/get"),v=r.n(y),g=r("lodash/has"),b=r.n(g),m=r("lodash/values"),O=r.n(m),j=r("lodash/pullAt"),S=r.n(j),w=r("lodash/pull"),x=r.n(w),E=r("debug"),A=r.n(E);function V(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var k=A()("informed:ObjMap\t"),P=function(e){var t=h()(e);return Number.isInteger(+t[t.length-1])};function F(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(0!==t.length){var n=v()(e,t);Array.isArray(n)&&r&&x()(n,void 0),(Array.isArray(n)?n.every(function(e){return null==e}):"{}"===JSON.stringify(n))&&p()(e,t),F(e,t.slice(0,t.length-1))}}var C=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,n=[{key:"empty",value:function(e){return 0===O()(e).length}},{key:"get",value:function(e,t){return v()(e,t)}},{key:"has",value:function(e,t){return b()(e,t)}},{key:"set",value:function(t,r,n){if(void 0!==n)f()(t,r,n);else if(P(r)&&void 0!==e.get(t,r)){f()(t,r,void 0);var o=h()(r);F(t,o=o.slice(0,o.length-1),!1)}else P(r)||void 0===e.get(t,r)||e.delete(t,r)}},{key:"delete",value:function(e,t){k("DELETE",t),p()(e,t);var r=h()(t);F(e,r=r.slice(0,r.length-1))}},{key:"pullOut",value:function(e,t,r){var n=h()(t);n=n.slice(0,n.length-1).join(),k("PathArray",n);var o=v()(e,n);k("Array",o),S()(o,r)}}],(r=null)&&V(t.prototype,r),n&&V(t,n),e}(),T=r("events");function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function B(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function M(e,t){return(M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function D(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var G=A()("informed:Controller\t"),q=function(e){function t(){var e,r,n,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(e=!(n=I(t).call(this))||"object"!==R(n)&&"function"!=typeof n?D(r):n).options=o,e.fields=new Map,e.state={values:{},touched:{},errors:{},pristine:!0,dirty:!1,invalid:!1,submits:0},e.deregister=e.deregister.bind(D(D(e))),e.register=e.register.bind(D(D(e))),e.setValue=e.setValue.bind(D(D(e))),e.setTouched=e.setTouched.bind(D(D(e))),e.setError=e.setError.bind(D(D(e))),e.submitForm=e.submitForm.bind(D(D(e))),e.reset=e.reset.bind(D(D(e))),e.update=e.update.bind(D(D(e))),e.updater={register:e.register,deregister:e.deregister,setValue:e.setValue,setTouched:e.setTouched,setError:e.setError,update:e.update},e}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&M(e,t)}(t,T["EventEmitter"]),r=t,(n=[{key:"getFormState",value:function(){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){_(e,t,r[t])})}return e}({},this.state,{pristine:this.pristine(),dirty:this.dirty(),invalid:this.invalid()})}},{key:"getFormApi",value:function(){var e=this;return{setValue:function(t,r){return e.fields.get(t).fieldApi.setValue(r)},setTouched:function(t,r){return e.fields.get(t).fieldApi.setTouched(r)},setError:function(t,r){return e.fields.get(t).fieldApi.setError(r)},setValues:function(t){return e.setValues(t)},getValue:function(t){return e.getValue(t)},getTouched:function(t){return e.getTouched(t)},getError:function(t){return e.getError(t)},reset:function(){return e.reset()},submitForm:function(t){return e.submitForm(t)},getState:function(){return e.getFormState()},getValues:function(){return e.getFormState().values},getFullField:function(t){return e.getFullField(t)},fieldExists:function(t){return null!=e.fields.get(t)},getInitialValue:function(t){return e.getInitialValue(t)}}}},{key:"setValue",value:function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];G("Setting ".concat(e," to ").concat(t)),C.set(this.state.values,e,t),delete this.state.error,this.emit("change"),this.emit("value"),r&&this.notify(e)}},{key:"setTouched",value:function(e,t){C.set(this.state.touched,e,t),this.emit("change")}},{key:"setError",value:function(e,t){C.set(this.state.errors,e,t),this.emit("change")}},{key:"setFormError",value:function(e){this.state.error=e,this.emit("change")}},{key:"notify",value:function(e){var t=this,r=this.fields.get(e);r.notify&&r.notify.forEach(function(e){var r=t.fields.get(e);if(r){G("Notifying",r.field);var n=t.getValue(r.field);r.fieldApi.validate(n)}})}},{key:"getValue",value:function(e){return C.get(this.state.values,e)}},{key:"getTouched",value:function(e){return C.get(this.state.touched,e)}},{key:"getError",value:function(e){return C.get(this.state.errors,e)}},{key:"getFullField",value:function(e){return e}},{key:"valid",value:function(){return!(!C.empty(this.state.errors)||this.state.error)}},{key:"invalid",value:function(){return!(C.empty(this.state.errors)&&!this.state.error)}},{key:"pristine",value:function(){return C.empty(this.state.touched)&&C.empty(this.state.values)}},{key:"dirty",value:function(){return!this.pristine()}},{key:"getInitialValue",value:function(e){return C.get(this.options.initialValues,e)}},{key:"reset",value:function(){var e=this;G("Resetting"),this.fields.forEach(function(t){t.fieldApi.reset();var r=C.get(e.options.initialValues,t.field);void 0!==r&&e.getFormApi().setValue(t.field,r)}),this.emit("change")}},{key:"setValues",value:function(e){var t=this;G("Setting values"),this.fields.forEach(function(r){var n=C.get(e,r.field);n&&t.getFormApi().setValue(r.field,n)}),this.emit("change")}},{key:"submitForm",value:function(e){var t=this;if(this.state.submits=this.state.submits+1,!this.options.dontPreventDefault&&e&&e.preventDefault(e),this.fields.forEach(function(e,r){var n=t.getValue(r);e.fieldApi.validate(n),e.fieldApi.setTouched(!0)}),this.options.validate){var r=this.options.validate(this.state.values);this.setFormError(r)}if(this.options.validateFields){var n=this.options.validateFields(this.state.values);this.fields.forEach(function(e){if(C.has(n,e.field)){var r=C.get(n,e.field);t.getFormApi().setError(e.field,r)}})}this.emit("change"),this.valid()?(G("Submit",this.state),this.emit("submit")):(G("Submit",this.state),this.emit("failure"))}},{key:"register",value:function(e,t,r){if(G("Register",e,t),this.fields.set(e,r),r.keepState){var n=C.get(this.state.values,e),o=C.get(this.options.initialValues,e);void 0!==n?this.getFormApi().setValue(e,n||t.value):void 0!==o?this.getFormApi().setValue(e,o):this.setValue(e,t.value,!1);var i=C.get(this.state.touched,e);this.getFormApi().setTouched(e,i)}else{var u=C.get(this.options.initialValues,e);void 0!==u?this.getFormApi().setValue(e,u):this.setValue(e,t.value,!1),this.setTouched(e,t.touched)}this.setError(e,t.error)}},{key:"deregister",value:function(e){G("Deregister",e),this.fields.get(e).keepState||(C.delete(this.state.values,e),C.delete(this.state.touched,e),C.delete(this.state.errors,e)),this.fields.delete(e),this.emit("change")}},{key:"update",value:function(e,t){G("Update",e),this.fields.set(e,t)}}])&&B(r.prototype,n),o&&B(r,o),t}();function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function U(){return(U=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function W(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function N(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function J(e,t){return!t||"object"!==L(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function z(e){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function H(e,t){return(H=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var K=A()("informed:Form\t\t"),Q=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=J(this,z(t).call(this,e))).controller=new q({dontPreventDefault:e.dontPreventDefault,initialValues:e.initialValues,validate:e.validate,validateFields:e.validateFields}),r.formApi=r.controller.getFormApi(),r.controller.on("change",function(){return r.forceUpdate()}),r.controller.on("change",function(){return r.props.onChange&&r.props.onChange(r.controller.getFormState())}),r.controller.on("submit",function(){return r.props.onSubmit&&r.props.onSubmit(r.controller.getFormState().values)}),r.controller.on("value",function(){return r.props.onValueChange&&r.props.onValueChange(r.controller.getFormState().values)}),r.controller.on("failure",function(){return r.props.onSubmitFailure&&r.props.onSubmitFailure(r.controller.getFormState().errors)}),r.props.getApi&&r.props.getApi(r.controller.getFormApi()),r}var r,n,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&H(e,t)}(t,o.a.Component),r=t,(n=[{key:"render",value:function(){K("Render FORM");var e=this.props,t=(e.children,e.getApi,e.onChange,e.onSubmit,e.onValueChange,e.initialValues,e.onSubmitFailure,e.render,e.validate,e.validateFields,e.component,e.dontPreventDefault,W(e,["children","getApi","onChange","onSubmit","onValueChange","initialValues","onSubmitFailure","render","validate","validateFields","component","dontPreventDefault"])),r=this.controller.getFormState();return o.a.createElement(i.Provider,{value:this.controller.updater},o.a.createElement(a.Provider,{value:this.formApi},o.a.createElement(u.Provider,{value:r},o.a.createElement("form",U({},t,{onReset:this.controller.reset,onSubmit:this.controller.submitForm}),this.content))))}},{key:"content",get:function(){var e=this.props,t=e.children,r=e.component,n=e.render,i={formState:this.controller.getFormState(),formApi:this.controller.getFormApi()};return r?o.a.createElement(r,i,t):n?n(i):"function"==typeof t?t(i):t}}])&&N(r.prototype,n),l&&N(r,l),t}();var X=function(){return Object(n.useContext)(a)};var Y=function(){return Object(n.useContext)(u)};function Z(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var $=function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){Z(e,t,r[t])})}return e}({},t,{getValue:function(r){return t.getValue("".concat(e,".").concat(r))},getTouched:function(r){return t.getTouched("".concat(e,".").concat(r))},getError:function(r){return t.getError("".concat(e,".").concat(r))},setValue:function(r,n){return t.setValue("".concat(e,".").concat(r),n)},setTouched:function(r,n){return t.setTouched("".concat(e,".").concat(r),n)},setError:function(r,n){return t.setError("".concat(e,".").concat(r),n)},getFullField:function(r){return"".concat(t.getFullField(e),".").concat(r)}})},ee=function(e){var t=e.scope,r=e.children,l=Object(n.useContext)(i),c=X(),f=Y(),s=Object(n.useMemo)(function(){return $(t,c)},[t]),p=Object(n.useMemo)(function(){return function(e,t){var r=t.register,n=t.deregister,o=t.setValue,i=t.setTouched,u=t.setError,a=t.update;return{register:function(t){for(var n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];return r.apply(void 0,["".concat(e,".").concat(t)].concat(o))},deregister:function(t){for(var r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return n.apply(void 0,["".concat(e,".").concat(t)].concat(o))},update:function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return a.apply(void 0,["".concat(e,".").concat(t)].concat(n))},setValue:function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return o.apply(void 0,["".concat(e,".").concat(t)].concat(n))},setTouched:function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return i.apply(void 0,["".concat(e,".").concat(t)].concat(n))},setError:function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return u.apply(void 0,["".concat(e,".").concat(t)].concat(n))}}}(t,l)},[t]);return o.a.createElement(i.Provider,{value:p},o.a.createElement(a.Provider,{value:s},o.a.createElement(u.Provider,{value:f},r)))};function te(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function re(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var u,a=e[Symbol.iterator]();!(n=(u=a.next()).done)&&(r.push(u.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(o)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var ne=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})},oe=function(e){var t=e.field,r=e.children,o=e.initialValue,i=X().getInitialValue(t)||o,u=i?i.map(function(){return ne()}):[],a=re(Object(n.useState)(u),2),l=a[0],c=a[1];return r({fields:l.map(function(e,r){return{key:e,field:"".concat(t,"[").concat(r,"]"),remove:function(){return function(e){var t=l.slice(0,e).concat(l.slice(e+1,l.length));c(t)}(r)},initialValue:i&&i[r]}}),add:function(){l.push(ne()),c(te(l))}})};function ie(){return(ie=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var ue=function(e){return o.a.forwardRef(function(t,r){return o.a.createElement(a.Consumer,null,function(n){return o.a.createElement(e,ie({formApi:n,ref:r},t))})})};function ae(){return(ae=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var le=function(e){return o.a.forwardRef(function(t,r){return o.a.createElement(u.Consumer,null,function(n){return o.a.createElement(e,ae({formState:n,ref:r},t))})})},ce=function(e,t){return{getValue:function(){return e.getValue(t)},setValue:function(r){return e.setValue(t,r)},getTouched:function(){return e.getTouched(t)},setTouched:function(r){return e.setTouched(t,r)},getError:function(){return e.getError(t)},setError:function(r){return e.setError(t,r)}}};var fe=function(e){var t=X();return Object(n.useMemo)(function(){return ce(t,e)},[e])},se=function(e){return{value:e.getValue(),touched:e.getTouched(),error:e.getError()}};var pe=function(e){var t=fe(e);return Y(),se(t)};function de(){return(de=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var he=function(e){return function(t){return function(r){var n=pe(e);return o.a.createElement(t,de({fieldState:n},r))}}};function ye(){return(ye=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var ve=function(e){return function(t){return function(r){var n=fe(e);return o.a.createElement(t,ye({fieldApi:n},r))}}};function ge(){return(ge=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var be=function(e){return o.a.forwardRef(function(t,r){return o.a.createElement(l.Consumer,null,function(n){var i=n.radioGroupApi,u=n.radioGroupState;return o.a.createElement(e,ge({radioGroupApi:i,radioGroupState:u,ref:r},t))})})};function me(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Oe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var u,a=e[Symbol.iterator]();!(n=(u=a.next()).done)&&(r.push(u.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(o)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var je=A()("informed:useField\t");function Se(e){var t=Object(n.useRef)(),r=Oe(Object(n.useState)(e),2),o=r[0],i=r[1];t.current=o;return[o,function(e){t.current=e,i(e)},function(){return t.current}]}var we=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.validate,o=t.mask,u=t.format,a=t.parse,l=t.initialValue,c=t.validateOnChange,f=t.validateOnBlur,s=t.validateOnMount,p=t.maskOnBlur,d=t.onValueChange,h=t.notify,y=t.keepState,v=t.maintainCursor,g=t.debug,b=t.type,m=Oe(Se(null!=l?l:void 0),3),O=m[0],j=m[1],S=m[2],w=Oe(Object(n.useState)(s?r(l):void 0),2),x=w[0],E=w[1],A=Oe(Object(n.useState)(),2),V=A[0],k=A[1],P=Oe(Se(0),3),F=(P[0],P[1]),C=P[2],T=Oe(Object(n.useState)(O),2),R=T[0],_=T[1],B=Object(n.useContext)(i),I=X(),M=function(t){E(t),B.setError(e,t)},D=function(t,n){je("Setting ".concat(e," to ").concat(t));var i=t;""===t&&(t=void 0),"number"===b&&void 0!==t&&(t=+t),o&&!p&&(i=o(t),t=o(t)),u&&a&&(t=a(t),i=u(t)),r&&c&&(je("Validating after change ".concat(e," ").concat(t)),M(r(t,I.getValues()))),n&&n.target&&n.target.selectionStart&&F(n.target.selectionStart),j(t),_(i),d&&d(t),B.setValue(e,t)},G=function(t){if(r&&f&&(je("Validating after blur ".concat(e," ").concat(S())),M(r(S(),I.getValues()))),o&&p){var n=o(S());j(n),_(n),d&&d(n),B.setValue(e,n)}k(t),B.setTouched(e,t)},q={setValue:D,setTouched:G,setError:M,reset:function(){D(null!=l?l:void 0),M(void 0),G(void 0)},validate:function(t){r&&(je("Field validating ".concat(e," ").concat(t)),M(r(t,I.getValues())))}},L={value:O,error:x,touched:V,maskedValue:R};je("Render",I.getFullField(e),L);var U=Object(n.useRef)(null);Object(n.useLayoutEffect)(function(){var t=I.getFullField(e);return je("Register",t),B.register(e,L,{field:t,fieldApi:q,fieldState:L,notify:h,keepState:y}),function(){je("Deregister",t),B.deregister(e)}},[e]),Object(n.useLayoutEffect)(function(){var t=I.getFullField(e);je("Update",e),B.update(e,{field:t,fieldApi:q,fieldState:L,notify:h,keepState:y})},[r,c,f,d]),Object(n.useLayoutEffect)(function(){v&&null!=U.current&&C()&&(U.current.selectionEnd=C())},[O]),Object(n.useLayoutEffect)(function(){g&&U&&(U.current.style.border="5px solid orange",setTimeout(function(){U.current.style.borderWidth="2px",U.current.style.borderStyle="inset",U.current.style.borderColor="initial",U.current.style.borderImage="initial"},500))});var W=[].concat(me(Object.values(L)),me(Object.values(t)),[e]);return{fieldState:L,fieldApi:q,purify:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Object(n.useMemo)(function(){return e},[].concat(me(W),me(t)))},ref:U}};function xe(){return(xe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Ee(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var Ae=function(e){return function(t){var r=t.field,n=t.validate,i=t.initialValue,u=t.validateOnChange,a=t.validateOnBlur,l=t.validateOnMount,c=t.maskOnBlur,f=t.onValueChange,s=t.notify,p=t.keepState,d=t.maintainCursor,h=t.debug,y=t.type,v=t.mask,g=t.format,b=t.parse,m=Ee(t,["field","validate","initialValue","validateOnChange","validateOnBlur","validateOnMount","maskOnBlur","onValueChange","notify","keepState","maintainCursor","debug","type","mask","format","parse"]),O=we(r,{validate:n,initialValue:i,validateOnChange:u,validateOnBlur:a,onValueChange:f,validateOnMount:l,maskOnBlur:c,notify:s,keepState:p,maintainCursor:d,debug:h,type:y,mask:v,format:g,parse:b}),j=O.fieldState,S=O.fieldApi,w=O.purify,x=O.ref;return w(o.a.createElement(e,xe({fieldApi:S,fieldState:j,field:r,forwardedRef:x,debug:h,type:y},m)),Object.values(m))}};function Ve(){return(Ve=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function ke(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var Pe=A()("informed:Text\t"),Fe=function(e){var t=e.fieldApi,r=e.fieldState,i=ke(e,["fieldApi","fieldState"]),u=r.maskedValue,a=t.setValue,l=t.setTouched,c=i.onChange,f=i.onBlur,s=i.field,p=(i.initialValue,i.forwardedRef),d=i.debug,h=ke(i,["onChange","onBlur","field","initialValue","forwardedRef","debug"]);return Pe("Render",s),Object(n.useLayoutEffect)(function(){d&&p&&(p.current.style.background="red",setTimeout(function(){p.current.style.background="white"},500))}),o.a.createElement("input",Ve({},h,{name:s,ref:p,value:u||0===u?u:"",onChange:function(e){a(e.target.value,e),c&&c(e)},onBlur:function(e){l(!0),f&&f(e)}}))},Ce=Ae(Fe);function Te(){return(Te=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Re(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var _e=function(e){var t=e.radioGroupApi,r=e.radioGroupState,n=Re(e,["radioGroupApi","radioGroupState"]),i=r.value,u=t.setValue,a=t.setTouched,l=t.onChange,c=t.onBlur,f=n.value,s=n.onChange,p=n.onBlur,d=n.field,h=(n.initialValue,n.forwardedRef),y=Re(n,["value","onChange","onBlur","field","initialValue","forwardedRef"]);return o.a.createElement("input",Te({},y,{name:d,ref:h,value:f,checked:i===f,onChange:function(e){e.target.checked&&(u(f),s&&s(e),l&&l(e))},onBlur:function(e){a(!0),p&&p(e),c&&c(e)},type:"radio"}))},Be=be(_e);function Ie(){return(Ie=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Me(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var De=function(e){var t=e.fieldApi,r=e.fieldState,i=Me(e,["fieldApi","fieldState"]),u=r.maskedValue,a=t.setValue,l=t.setTouched,c=i.onChange,f=i.onBlur,s=i.field,p=(i.initialValue,i.forwardedRef),d=i.debug,h=Me(i,["onChange","onBlur","field","initialValue","forwardedRef","debug"]);return Object(n.useLayoutEffect)(function(){d&&p&&(p.current.style.background="red",setTimeout(function(){p.current.style.background="white"},500))}),o.a.createElement("textarea",Ie({},h,{name:s,ref:p,value:u||"",onChange:function(e){a(e.target.value,e),c&&c(e)},onBlur:function(e){l(!0),f&&f(e)}}))},Ge=Ae(De);function qe(e){return(qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Le(){return(Le=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Ue(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function We(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Ne(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Je(e){return(Je=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ze(e,t){return(ze=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function He(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Ke=function(e){function t(e){var r,n,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(i=Je(t).call(this,e))||"object"!==qe(i)&&"function"!=typeof i?He(n):i).handleChange=r.handleChange.bind(He(He(r))),r.selectRef=o.a.createRef(),r}var r,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ze(e,t)}(t,o.a.Component),r=t,(n=[{key:"handleChange",value:function(e){var t=We((this.props.forwardedRef||this.selectRef).current).filter(function(e){return e.selected}).map(function(e){return e.value});this.props.fieldApi.setValue(this.props.multiple?t:t[0]||""),this.props.onChange&&this.props.onChange(e)}},{key:"componentDidUpdate",value:function(){var e=this;this.props.debug&&this.props.forwardedRef&&(this.props.forwardedRef.current.style.background="red",setTimeout(function(){e.props.forwardedRef.current.style.background="white"},500))}},{key:"render",value:function(){var e=this.props,t=e.fieldApi,r=e.fieldState,n=Ue(e,["fieldApi","fieldState"]),i=r.value,u=(t.setValue,t.setTouched),a=(n.onChange,n.onBlur),l=n.field,c=(n.initialValue,n.forwardedRef),f=(n.debug,n.children),s=n.multiple,p=Ue(n,["onChange","onBlur","field","initialValue","forwardedRef","debug","children","multiple"]);return o.a.createElement("select",Le({},p,{multiple:s,name:l,ref:c||this.selectRef,value:i||(s?[]:""),onChange:this.handleChange,onBlur:function(e){u(!0),a&&a(e)}}),f)}}])&&Ne(r.prototype,n),i&&Ne(r,i),t}(),Qe=Ae(Ke);function Xe(){return(Xe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Ye(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var Ze=function(e){var t=e.value,r=e.forwardedRef,n=e.children,i=Ye(e,["value","forwardedRef","children"]);return o.a.createElement("option",Xe({ref:r,value:t,key:t},i),n)};function $e(){return($e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function et(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var tt=function(e){var t=e.fieldApi,r=e.fieldState,n=et(e,["fieldApi","fieldState"]),i=r.value,u=t.setValue,a=t.setTouched,l=n.onChange,c=n.onBlur,f=n.field,s=(n.initialValue,n.debug,n.forwardedRef),p=et(n,["onChange","onBlur","field","initialValue","debug","forwardedRef"]);return o.a.createElement("input",$e({},p,{name:f,ref:s,checked:!!i,onChange:function(e){u(e.target.checked),l&&l(e)},onBlur:function(e){a(!0),c&&c(e)},type:"checkbox"}))},rt=Ae(tt);function nt(e){return(nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ot(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){it(e,t,r[t])})}return e}function it(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ut(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function at(e,t){return!t||"object"!==nt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function lt(e){return(lt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ct(e,t){return(ct=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ft=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),at(this,lt(t).apply(this,arguments))}var r,i,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ct(e,t)}(t,n["Component"]),r=t,(i=[{key:"render",value:function(){return o.a.createElement(l.Provider,{value:this.groupContext},this.props.children)}},{key:"groupContext",get:function(){return{radioGroupApi:ot({},this.props.fieldApi,{onChange:this.props.onChange,onBlur:this.props.onBlur}),radioGroupState:this.props.fieldState}}}])&&ut(r.prototype,i),u&&ut(r,u),t}(),st=Ae(ft);r.d(t,"Form",function(){return Q}),r.d(t,"withFormApi",function(){return ue}),r.d(t,"withFormState",function(){return le}),r.d(t,"withFieldApi",function(){return ve}),r.d(t,"withFieldState",function(){return he}),r.d(t,"withRadioGroup",function(){return be}),r.d(t,"asField",function(){return Ae}),r.d(t,"useField",function(){return we}),r.d(t,"useFieldApi",function(){return fe}),r.d(t,"useFieldState",function(){return pe}),r.d(t,"useFormApi",function(){return X}),r.d(t,"useFormState",function(){return Y}),r.d(t,"Text",function(){return Ce}),r.d(t,"Radio",function(){return Be}),r.d(t,"TextArea",function(){return Ge}),r.d(t,"Select",function(){return Qe}),r.d(t,"Option",function(){return Ze}),r.d(t,"Checkbox",function(){return rt}),r.d(t,"RadioGroup",function(){return st}),r.d(t,"BasicText",function(){return Fe}),r.d(t,"BasicRadio",function(){return _e}),r.d(t,"BasicRadioGroup",function(){return ft}),r.d(t,"BasicTextArea",function(){return De}),r.d(t,"BasicSelect",function(){return Ke}),r.d(t,"BasicCheckbox",function(){return tt}),r.d(t,"Scope",function(){return ee}),r.d(t,"ArrayField",function(){return oe})},debug:function(e,t){e.exports=require("debug")},events:function(e,t){e.exports=require("events")},"lodash/get":function(e,t){e.exports=require("lodash/get")},"lodash/has":function(e,t){e.exports=require("lodash/has")},"lodash/pull":function(e,t){e.exports=require("lodash/pull")},"lodash/pullAt":function(e,t){e.exports=require("lodash/pullAt")},"lodash/setWith":function(e,t){e.exports=require("lodash/setWith")},"lodash/toPath":function(e,t){e.exports=require("lodash/toPath")},"lodash/unset":function(e,t){e.exports=require("lodash/unset")},"lodash/values":function(e,t){e.exports=require("lodash/values")},react:function(e,t){e.exports=require("react")}})});
//# sourceMappingURL=index.js.map